<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd"
    xmlns="http://www.exoplaform.org/xml/ns/kernel_1_2.xsd">

  <!-- Ram data store -->
  <component>
    <key>org.gatein.portal.mop.Store</key>
    <type>org.gatein.portal.impl.mop.ram.RamStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.site.SiteStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamSiteStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.layout.LayoutStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamLayoutStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.description.DescriptionStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamDescriptionStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.navigation.NavigationStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamNavigationStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.page.PageStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamPageStore</type>
  </component>
  <component>
    <key>org.gatein.portal.mop.customization.CustomizationStore</key>
    <type>org.gatein.portal.impl.mop.ram.RamCustomizationStore</type>
  </component>
  <component>
    <type>org.gatein.portal.impl.mop.ram.RamSecurityStore</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.permission.SecurityServiceImpl</type>
  </component>

  <!-- Mongo data store -->
  <component profiles="mongo">
    <key>org.gatein.portal.mop.Store</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoStore</type>
    <init-params>
      <value-param>
        <name>host</name>
        <value>${gatein.mop.mongo.host:localhost}</value>
      </value-param>
      <value-param>
        <name>port</name>
        <value>${gatein.mop.mongo.port:27017}</value>
      </value-param>
    </init-params>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.site.SiteStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoSiteStore</type>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.layout.LayoutStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoLayoutStore</type>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.description.DescriptionStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoDescriptionStore</type>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.navigation.NavigationStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoNavigationStore</type>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.page.PageStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoPageStore</type>
  </component>
  <component profiles="mongo">
    <key>org.gatein.portal.mop.customization.CustomizationStore</key>
    <type>org.gatein.portal.impl.mop.mongo.MongoCustomizationStore</type>
  </component>

  <!-- -->
  <component>
    <type>org.gatein.portal.web.portlet.PortletAppManager</type>
  </component>

  <!-- Data services -->
  <component>
    <type>org.gatein.portal.mop.site.SiteServiceImpl</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.layout.LayoutServiceImpl</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.description.DescriptionServiceImpl</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.navigation.NavigationServiceImpl</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.page.PageServiceImpl</type>
  </component>
  <component>
    <type>org.gatein.portal.mop.customization.CustomizationServiceImpl</type>
  </component>

  <!-- -->
  <component>
    <type>org.gatein.portal.importer.ModelImporter</type>
    <init-params>
      <value-param>
        <name>default.import.mode</name>
        <value>merge</value>
      </value-param>
      <value-param>
        <name>default.portal</name>
        <description>The default portal for checking db is empty or not</description>
        <value>classic</value>
      </value-param>
      <value-param>
        <name>page.templates.location</name>
        <description>the path to the location that contains Page templates</description>
        <value>war:/conf/portal/template/pages</value>
      </value-param>
      <value-param>
        <name>override</name>
        <description>The flag parameter to decide if portal metadata is overriden on restarting server</description>
        <value>false</value>
      </value-param>
      <object-param>
        <name>site.templates.location</name>
        <description>description</description>
        <object type="org.exoplatform.portal.config.SiteConfigTemplates">
          <field name="location">
            <string>war:/conf/portal</string>
          </field>
          <field name="portalTemplates">
            <collection type="java.util.HashSet">
              <value>
                <string>basic</string>
              </value>
              <value>
                <string>classic</string>
              </value>
            </collection>
          </field>
          <field name="groupTemplates">
            <collection type="java.util.HashSet">
              <value>
                <string>group</string>
              </value>
            </collection>
          </field>
          <field name="userTemplates">
            <collection type="java.util.HashSet">
              <value>
                <string>user</string>
              </value>
            </collection>
          </field>
        </object>
      </object-param>
      <object-param>
        <name>portal.configuration</name>
        <description>description</description>
        <object type="org.exoplatform.portal.config.NewPortalConfig">
          <field name="predefinedOwner">
            <collection type="java.util.HashSet">
              <value>
                <string>classic</string>
              </value>
              <value>
                <string>mobile</string>
              </value>
            </collection>
          </field>
          <field name="ownerType">
            <string>portal</string>
          </field>
          <field name="templateLocation">
            <string>war:/conf/portal/</string>
          </field>
        </object>
      </object-param>
      <object-param>
        <name>group.configuration</name>
        <description>description</description>
        <object type="org.exoplatform.portal.config.NewPortalConfig">
          <field name="predefinedOwner">
            <collection type="java.util.HashSet">
              <value>
                <string>/platform/administrators</string>
              </value>
              <value>
                <string>/platform/users</string>
              </value>
              <value>
                <string>/platform/guests</string>
              </value>
              <value>
                <string>/organization/management/executive-board</string>
              </value>
            </collection>
          </field>
          <field name="ownerType">
            <string>group</string>
          </field>
          <field name="templateLocation">
            <string>war:/conf/portal</string>
          </field>
        </object>
      </object-param>
      <object-param>
        <name>user.configuration</name>
        <description>description</description>
        <object type="org.exoplatform.portal.config.NewPortalConfig">
          <field name="predefinedOwner">
            <collection type="java.util.HashSet">
              <value>
                <string>root</string>
              </value>
            </collection>
          </field>
          <field name="ownerType">
            <string>user</string>
          </field>
          <field name="templateLocation">
            <string>war:/conf/portal</string>
          </field>
        </object>
      </object-param>
    </init-params>
  </component>
</configuration>
